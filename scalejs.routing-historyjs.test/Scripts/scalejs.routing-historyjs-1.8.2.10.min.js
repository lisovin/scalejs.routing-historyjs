define("scalejs.routing-historyjs/history",["scalejs!core","history","scalejs.reactive"],function(t,e){function r(t){return e.pushState(t.data,t.title,t.url)}function n(){return e.getState()}function a(t){return e.replaceState(t.data,t.title,t.url)}function o(){var r=t.reactive.Observable,a=t.reactive.Disposable;return r.createWithDisposable(function(t){return e.Adapter.bind(window,"statechange",function(){t.onNext(n())}),a.create(function(){window.onstatechange=null})}).publishValue(n()).refCount()}return{add:r,get:n,replace:a,observe:o}}),define("scalejs.routing-historyjs/routeMapper",["scalejs!core"],function(t){var e=t.object.clone;return function(t){function r(){var e;o=t.replace(/^\/*|[/?]*$/g,""),i=o.match(/{([^}])*}/g).map(function(t){return t.replace(/[{}]/g,"")}),e="^[/]*"+o.replace(/{[^}]*}/g,"(.+?)")+"[?/]*$",s=new RegExp(e)}function n(t){var e,r,n,a,o={};return e=t.split(/\/*\?/),r=e[0],n=t.substring(r.length).replace(/^[?/]*/,""),a=r.match(s),null===a?null:(a.shift(),a.forEach(function(t,e){o[i[e]]=t}),n.split("&").map(function(t){var e=t.split("="),r=e[0],n=e[1];r&&(o[r]=n)}),o)}function a(t){t=e(t);var r,n={};return r=i.reduce(function(e,r){var n=e.replace("{"+r+"}",t[r]);return delete t[r],n},o),n=Object.keys(t).map(function(e){return e+"="+t[e]}).join("&"),"/"+r+(n?"?"+n:"")}var o,i,s;return r(),{fromUrl:n,toUrl:a}}}),define("scalejs.routing-historyjs/router",["./routeMapper"],function(t){function e(e,r){var n=t(r);i[e]=n}function r(t,e){var r,n;if(!(e.indexOf(o)<0))return e=e.substring(o.length),r=i[t],r?n=r.fromUrl(e):void 0}function n(t,e){var r,n;return r=i[t],r?(n=r.toUrl(e),o+n):void 0}function a(t){o=t}var o,i={};return{addRoute:e,tryToUrl:n,tryFromUrl:r,setBaseUrl:a}}),define("scalejs.routing-historyjs/routing",["scalejs!core","./history","./router","scalejs.statechart-scion","scalejs.reactive"],function(t,e,r){function n(t){w?(w=!1,e.replace({url:t})):e.add({url:t})}function a(){var t;U.add(y().subscribe(function(t){var e;"entry"===t.event&&(e=r.tryToUrl(t.state,t.currentEvent.data),e&&n(e))})),U.add(e.observe().subscribe(function(e){var r=e.hash;t!==r&&(t=r,h("routed",{url:r},0))}))}function o(){U.dispose()}function i(t){return b(function(e){var n;r.addRoute(e.id,t),n=f("routed",function(t){var n=r.tryFromUrl(e.id,t.data.path);return n?(l(t.data,n),!0):void 0},p(e.id)),u?j(u,n):m.push(n)})}function s(t,e){var n,i;return u=t,c(e,"baseUrl")?(r.setBaseUrl(e.baseUrl),n=d(arguments).slice(2,arguments.length)):n=d(arguments).slice(1,arguments.length),i=v.apply(null,[u,f("router.disposing",p("router.disposed")),v("router.waiting",g(a)),v("router.disposed",g(o))].concat(m).concat(n))}var u,c=t.object.has,l=t.object.extend,d=t.array.toArray,f=t.state.builder.on,p=t.state.builder.gotoInternally,g=t.state.builder.onEntry,v=t.state.builder.state,h=t.state.raise,b=t.functional.builder.$yield,j=t.state.registerTransition,y=t.state.observe,m=[],U=new t.reactive.CompositeDisposable,w=!0;return{route:i,routerState:s}}),define("scalejs.routing-historyjs",["scalejs!core","./scalejs.routing-historyjs/routing"],function(t,e){t.registerExtension({routing:e})});